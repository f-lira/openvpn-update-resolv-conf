# Maintainer:  Flavio Lira <flaviolira1@gmail.com>
# Contributor: Flavio Lira <flaviolira1@gmail.com>

_pkgname=openvpn-update-resolv-conf
pkgname="$_pkgname"-git
pkgver=44.3325bda
pkgrel=1
pkgdesc="This is a script to update your /etc/resolv.conf with DNS settings that come from the received push dhcp-options. Since network management is out of OpenVPN client scope, this script adds and removes the provided from those settings. This script was found on the OpenVPN page of the Archlinux Wiki"
arch=('any')
url="https://github.com/f-lira/$_pkgname"
license=('GPL')
provides=("$_pkgname")
conflicts=("$_pkgname")
depends=('openvpn' 'openresolv' 'networkmanager')
makedepends=('git')
install=openvpn-update-resolv-conf-git.install
source=("git://github.com/f-lira/$_pkgname#branch=dev")
md5sums=('SKIP')

pkgver() {
  cd "$_pkgname"
  printf "%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
  cd "$_pkgname"
  install -D -m755 update-resolv-conf.sh "$pkgdir/etc/openvpn/update-resolv-conf"
  install -D -m755 1000-update-resolv-conf-drop-tun0.sh "$pkgdir/etc/NetworkManager/dispatcher.d/1000-update-resolv-conf-drop-tun0.sh"
}

# vim: set ts=2 sw=2 et:
